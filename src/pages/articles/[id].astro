---
import { getAllArticles, getArticleById } from "../../apis/articles";
import Article from "../../components/Article.astro";
import SideBanners from "../../components/SideBanners.astro";
import MainSideStaticLayout from "../../layouts/MainSideStaticLayout.astro";

export async function getStaticPaths() {
  const articles = await getAllArticles();
  return articles.contents.map((article) => ({ params: { id: article.id } }));
}
const { id } = Astro.params;
const article = await getArticleById(id);
---

<MainSideStaticLayout title={article.title} ogImageUrl={article.thumbnail.url}>
  <Fragment slot="main">
    <Article article={article} />
  </Fragment>
  <Fragment slot="aside">
    <SideBanners />
  </Fragment>
</MainSideStaticLayout>
