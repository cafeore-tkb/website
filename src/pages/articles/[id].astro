---
import { getAllArticles, getArticleById } from "../../apis/articles";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
	const articles = await getAllArticles();
	return articles.contents.map((article) => ({ params: { id: article.id } }));
}
const { id } = Astro.params;
const article = await getArticleById(id);
const { publishedAt, updatedAt, title, content, thumbnail } = article;
---

<Layout>
  <main>
    <h1>{title}</h1>
    <p>publishedAt: {publishedAt}</p>
    <p>updatedAt: {updatedAt}</p>
    {thumbnail && <img src={thumbnail.url} />}
    <div set:html={content}></div>
  </main>
</Layout>
